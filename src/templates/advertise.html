{% extends "maintemplate.html" %}

{% block title %}Advertise{% endblock %}

{% block style %}

<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/jquery-ui-1.10.2.custom.min.css') }}" />

<style type="text/css">
	label.control-label {
		font-weight:bold;
	}
	
	.th-fixed-width {
		width: 140px;
	}
	
	.highlight {
		background-color: yellow !important;
	}
</style>

{% endblock %}

{% block script %}

<script type="text/javascript" src="{{ url_for('static', filename='js/jquery-ui-1.10.2.custom.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/maskedinput.js') }}"></script>

<script type="text/javascript">
	
	function sendNow() {
	
	}
	
	function submit() {
		if(true) {
			//$("#smsValidationError").hide();
			//$("#emailValidationError").hide();
			//$("#nameValidationError").hide();
			$("#submitButton").attr("disabled", "disabled");
			$.ajax({
				url:"/advertise",
				type: 'POST',
				//data: $("#submissionForm").serialize(),
				success: function(data) {
					$("#submitError").hide();
				},
				error: function() {
					$("#submitError").show();
					$("#submitSuccess").hide();
					$("#submitButton").removeAttr("disabled");
				}
			});
		} else {
			$("#submitSuccess").hide();
			$("#submitError").hide();
		}
		return false;
	}
	
</script>

{% endblock %}

{% block content %}
<div class="row">
	<div class="span12">
		<h3>Send Coupons and Promos</h3>
		<form class="form-horizontal" id="messageForm" action="false" style="margin-bottom:0px">
			<fieldset>	
				<div class="control-group">
					<label for="message" class="control-label">Message</label>
					<div class="controls">
						<select>
							<option>Select Message...</option>
							<option>Create New...</option>
						</select>
					</div>
				</div>
				
				<div class="control-group">
					<label class="control-label">Recipients<br>(Selected Below)</label>
					<div class="controls">
						No recipients selected
					</div>
				</div>
				
				<div class="control-group">
					<label class="control-label"></label>
					<a id="sendNowButton" class="btn btn-primary" onclick="sendNow();">
						Send Now
					</a>
					<a id="scheduleButton" class="btn btn-inverse" disabled style="margin-left:6px">
						Schedule
					</a>
				</div>
			</fieldset>
		</form>
		<div class="row">
			<div class="span12">
				
				<div id="submitError" class="alert alert-error" style="display:none;">
					<strong>Unable to send messages</strong>&nbsp; Something went wrong. Please try again later. If the problem persists, please report a bug (link in footer).
				</div>
				
				<div id="submitSuccess" class="alert alert-success" style="display:none;">
					Messages sent successfully
				</div>
				
			</div>
		</div>
	</div>
</div>
<hr>
<div class="row">
	<div class="span12">
		<table class="table table-bordered" style="width:100%">
			<thead>
				<tr>
					<th style="width:30px">
						<a class="btn" style="width:15px"><input type="checkbox" id="masterCheckbox" style="margin-top:-4px"></a>
					</th>
					<th>
						Name
					</th>
					<th class="th-fixed-width">
						Date Subscribed
					</th>
					<th class="th-fixed-width">
						Signup Method
					</th>
					<th class="th-fixed-width">
						# Promos Sent
					</th>
					<th style="width:84px">
						Remove
					</th>
				</tr>
			</thead>
			<tbody>
				{% for optin in optInList %}
					<tr id="guest-{{optin.guest_ID}}">
						<td>
							<input type="checkbox" style="margin-left:14px" id="checkbox-{{optin.guest_ID}}">
						</td>
						<td>
							{{ optin.name }}
						</td>
						<td>
							{{ optin.subscribe_date }}
						</td>
						<td>
							{{ optin.signup_method }}
						</td>
						<td>
							{{ optin.promos_sent }}
						</td>
						<td>
							<a class="btn btn-danger btn-small" onclick="optOut('{{ optin.guest_ID }}'"><i class="icon-remove"></i>&nbsp;&nbsp;Remove</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>


{% endblock %}